<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Functional Language Correctness | Chase Johnson</title>
  <link rel = 'canonical' href = 'https://cjohnson19.github.io/posts/functional-language-correctness/'>
  <meta name="description" content="Welcome to my blog! I&#39;m a Computer Science MS student at the University of Minnesota with a particular interest in programming languages.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Functional Language Correctness" />
<meta property="og:description" content="Introduction  What is Functional Programming?  If you already have experienced functional programming, or feel like you have a good grasp on its concepts, feel free to jump ahead to the next sub section on OCaml. This will only be review for you.
 If you have never heard of functional programming, take some time to ponder on the design and don&#39;t jump to conclusions.
 My first time using a functional language was much like my first time programming recursively." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cjohnson19.github.io/posts/functional-language-correctness/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-06T18:35:32-06:00" />
<meta property="article:modified_time" content="2021-12-06T18:35:32-06:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Functional Language Correctness"/>
<meta name="twitter:description" content="Introduction  What is Functional Programming?  If you already have experienced functional programming, or feel like you have a good grasp on its concepts, feel free to jump ahead to the next sub section on OCaml. This will only be review for you.
 If you have never heard of functional programming, take some time to ponder on the design and don&#39;t jump to conclusions.
 My first time using a functional language was much like my first time programming recursively."/>

  
  
  
  <link rel="stylesheet" href="https://cjohnson19.github.io/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css" integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  

  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">All Posts</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li>
          <a class="icon" href="https://cjohnson19.github.io/posts/polymorphism/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&text=Functional%20Language%20Correctness" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&title=Functional%20Language%20Correctness" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&is_video=false&description=Functional%20Language%20Correctness" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Functional%20Language%20Correctness&body=Check out this article: https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&title=Functional%20Language%20Correctness" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&title=Functional%20Language%20Correctness" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&name=Functional%20Language%20Correctness&description=Introduction%20%20What%20is%20Functional%20Programming%3f%20%20If%20you%20already%20have%20experienced%20functional%20programming%2c%20or%20feel%20like%20you%20have%20a%20good%20grasp%20on%20its%20concepts%2c%20feel%20free%20to%20jump%20ahead%20to%20the%20next%20sub%20section%20on%20OCaml.%20This%20will%20only%20be%20review%20for%20you.%0a%20If%20you%20have%20never%20heard%20of%20functional%20programming%2c%20take%20some%20time%20to%20ponder%20on%20the%20design%20and%20don%26%2339%3bt%20jump%20to%20conclusions.%0a%20My%20first%20time%20using%20a%20functional%20language%20was%20much%20like%20my%20first%20time%20programming%20recursively." aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&t=Functional%20Language%20Correctness" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Functional Language Correctness
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2021-12-06 18:35:32 -0600 CST" itemprop="datePublished">2021-12-06</time>
          
        </div>
        
        
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          
          7 minute read
        </div>
        
        
        
      </div>
    </header>

    
    <div id="toc">
      <nav id="TableOfContents">
<ul>
<li><a href="#headline-1">Introduction</a>
<ul>
<li><a href="#headline-2">What is Functional Programming?</a>
</li>
<li><a href="#headline-3">Introduction to OCaml</a>
<ul>
<li><a href="#headline-4">Types</a>
</li>
<li><a href="#headline-5">Pattern Matching</a>
</li>
<li><a href="#headline-6">Functions as Arguments</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#headline-7">Perspective of a Program</a>
<ul>
<li><a href="#headline-8">Imperative</a>
</li>
<li><a href="#headline-9">Functional</a>
</li>
</ul>
</li>
<li><a href="#headline-10">Reasoning Correctness &amp; Edge Cases</a>
<ul>
<li><a href="#headline-11">Imperative</a>
</li>
<li><a href="#headline-12">Functional</a>
</li>
</ul>
</li>
</ul>
</nav>
    </div>
    
    <div class="content" itemprop="articleBody">
      
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Introduction
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<div id="outline-container-headline-2" class="outline-3">
<h3 id="headline-2">
What is Functional Programming?
</h3>
<div id="outline-text-headline-2" class="outline-text-3">
<p>If you already have experienced functional programming, or feel like you have a
good grasp on its concepts, feel free to jump ahead to the <a href="#headline-3">next sub section on OCaml</a>. This will only be review for you.</p>
<p>
If you have never heard of functional programming, take some time to ponder on
the design and don&#39;t jump to conclusions.</p>
<p>
My first time using a functional language was much like my first time
programming recursively. It was difficult to break out of my tendencies to write
for loops. This comparison is especially relevant since functional languages
usually encourage recursive thoughts and implementations.</p>
<p>
Imperative programming views an operation as a transformation of internal state
via <em>side effects</em>. To compute some value, a series of state transformations are
executed until the answer is held in memory somewhere. This closely resembles a
<a href="https://en.wikipedia.org/wiki/Turing_machine">Turing Machine</a>. On the other hand, functional languages view an operation as a
composition of functions. A series of functions are composed to yield an answer
for a given input. This closely resembles <a href="https://en.wikipedia.org/wiki/Lambda_calculus">Lambda calculus</a>.</p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-3">
<h3 id="headline-3">
Introduction to OCaml
</h3>
<div id="outline-text-headline-3" class="outline-text-3">
<p>If you are familiar with <a href="https://ocaml.org/">OCaml</a>, feel free to jump to the next section now.
Otherwise, I&#39;d advise looking over the <a href="https://ocaml.org/releases/4.11/htmlman/index.html">manual</a> chapter 1. I&#39;ll summarize briefly
the main points here.</p>
<div id="outline-container-headline-4" class="outline-4">
<h4 id="headline-4">
Types
</h4>
<div id="outline-text-headline-4" class="outline-text-4">
<p>OCaml shares many types with traditional languages with one exception, the
array. While OCaml does allow arrays, it&#39;s much more common to use a list, which
is similar to a <a href="https://en.wikipedia.org/wiki/Linked_list">linked list</a>. Links from one node to another is called <code>cons</code>
(infix <code>::</code> is the cons operator) and the ending is <code>[]</code>.</p>
<p>
For example: <code>1::2::[]</code> is equivalent to <code>[1;2]</code> which is equivalent to the linked
list:</p>
<p><img src="images/linked_list.png" alt="images/linked_list.png" title="images/linked_list.png" /></p>
<p>
Custom types can easily replace the notion of a <code>struct</code>.</p>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">type</span> simple_pair <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span> a<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">int</span><span style="color:#ff79c6">;</span> b<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">char</span><span style="color:#ff79c6">;</span> <span style="color:#ff79c6">};;</span></code></pre></div>
</div>
<pre class="example">
type simple_pair = { a : int; b : char; }
</pre>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">let</span> s <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span> a <span style="color:#ff79c6">=</span> 1<span style="color:#ff79c6">;</span> b <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;x&#39;</span> <span style="color:#ff79c6">};;</span></code></pre></div>
</div>
<pre class="example">
val s : simple_pair = {a = 1; b = &#39;x&#39;}
</pre>
<p>
Custom types can also be defined to represent disjoint sets of items (otherwise
known as variant records). This can be very useful for concepts link a <a href="https://en.wikipedia.org/wiki/Binary_tree">binary
tree</a>.</p>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">type</span> int_btree <span style="color:#ff79c6">=</span>
  <span style="color:#ff79c6">|</span> <span style="color:#50fa7b">Leaf</span> <span style="color:#ff79c6">of</span> <span style="color:#8be9fd">int</span>
  <span style="color:#ff79c6">|</span> <span style="color:#50fa7b">Node</span> <span style="color:#ff79c6">of</span> <span style="color:#8be9fd">int</span> <span style="color:#ff79c6">*</span> int_btree <span style="color:#ff79c6">*</span> int_btree<span style="color:#ff79c6">;;</span></code></pre></div>
</div>
<pre class="example">
type int_btree = Leaf of int | Node of int * int_btree * int_btree
</pre>
<p>
Let&#39;s define the binary tree:</p>
<p><img src="images/binary_tree.png" alt="images/binary_tree.png" title="images/binary_tree.png" /></p>
<p>
with:</p>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">let</span> my_tree <span style="color:#ff79c6">=</span> <span style="color:#50fa7b">Node</span><span style="color:#ff79c6">(</span>2<span style="color:#ff79c6">,</span> <span style="color:#50fa7b">Leaf</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">),</span> <span style="color:#50fa7b">Leaf</span><span style="color:#ff79c6">(</span>3<span style="color:#ff79c6">));;</span></code></pre></div>
</div>
<pre class="example">
Node (2, Leaf 1, Leaf 3)
</pre>
</div>
</div>
<div id="outline-container-headline-5" class="outline-4">
<h4 id="headline-5">
Pattern Matching
</h4>
<div id="outline-text-headline-5" class="outline-text-4">
<p>OCaml allows conditionals based on the structure / type of the input. This is
especially powerful when used in conjunction with OCaml&#39;s type system, such as
our previously defined binary tree. Suppose we want a simple function to check
if our tree is empty.</p>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">let</span> <span style="color:#ff79c6">rec</span> is_leaf t <span style="color:#ff79c6">=</span>
  <span style="color:#ff79c6">match</span> t <span style="color:#ff79c6">with</span>
    <span style="color:#50fa7b">Leaf</span> <span style="color:#ff79c6">-&gt;</span> true
  <span style="color:#ff79c6">|</span> <span style="color:#50fa7b">Node</span> <span style="color:#ff79c6">(</span>v<span style="color:#ff79c6">,</span>left<span style="color:#ff79c6">,</span>right<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">-&gt;</span> false<span style="color:#ff79c6">;;</span></code></pre></div>
</div>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">let</span> empty_example <span style="color:#ff79c6">=</span> is_leaf <span style="color:#50fa7b">Leaf</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">);;</span></code></pre></div>
</div>
<pre class="example">
true
</pre>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">let</span> other_example <span style="color:#ff79c6">=</span> is_leaf <span style="color:#ff79c6">(</span><span style="color:#50fa7b">Node</span><span style="color:#ff79c6">(</span>1<span style="color:#ff79c6">,</span> <span style="color:#50fa7b">Leaf</span><span style="color:#ff79c6">(</span>2<span style="color:#ff79c6">),</span> <span style="color:#50fa7b">Leaf</span><span style="color:#ff79c6">(</span>3<span style="color:#ff79c6">)));;</span></code></pre></div>
</div>
<pre class="example">
false
</pre>
</div>
</div>
<div id="outline-container-headline-6" class="outline-4">
<h4 id="headline-6">
Functions as Arguments
</h4>
<div id="outline-text-headline-6" class="outline-text-4">
<p>A foundational concept of functional programs is that functions are first class
citizens. As such, they can be parameters to other functions. There is a common
function implemented by default in these languages called <code>map</code>.</p>
<p>
<code>map</code> will take a function, <code>f</code>, and a list, <code>l</code>, applying <code>f</code> to every element in <code>l</code>.</p>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">let</span> <span style="color:#ff79c6">rec</span> map f l <span style="color:#ff79c6">=</span>
  <span style="color:#ff79c6">match</span> l <span style="color:#ff79c6">with</span>
    [] <span style="color:#ff79c6">-&gt;</span> []
  <span style="color:#ff79c6">|</span> h<span style="color:#ff79c6">::</span>tl <span style="color:#ff79c6">-&gt;</span> <span style="color:#ff79c6">(</span>f h<span style="color:#ff79c6">)::(</span>map f tl<span style="color:#ff79c6">);;</span></code></pre></div>
</div>
<p>
Now, we can pass a function into <code>map</code>.</p>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">let</span> add_one a <span style="color:#ff79c6">=</span> a <span style="color:#ff79c6">+</span> 1<span style="color:#ff79c6">;;</span></code></pre></div>
</div>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">let</span> map_example <span style="color:#ff79c6">=</span> map add_one <span style="color:#ff79c6">[</span>1<span style="color:#ff79c6">;</span> 2<span style="color:#ff79c6">;</span> 3<span style="color:#ff79c6">];;</span></code></pre></div>
</div>
<pre class="example">
val map_example : int list = [2; 3; 4]
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-7" class="outline-2">
<h2 id="headline-7">
Perspective of a Program
</h2>
<div id="outline-text-headline-7" class="outline-text-2">
<p>Suppose we want to find the maximum number of an array <code>A</code> with size <code>n</code>. How does
the programming language we use influence our implementation?</p>
<div id="outline-container-headline-8" class="outline-3">
<h3 id="headline-8">
Imperative
</h3>
<div id="outline-text-headline-8" class="outline-text-3">
<p>As previously mentioned, in imperative programming, operations will usually
modify the program&#39;s state in some way. These state transformations are
performed in a specific order to obtain a desired result stored state. To solve
our problem, we initialize a location in memory to hold the maximum of every
subarray until this subarray is the entirety of <code>A</code>.</p>
<div class="src src-c">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8be9fd">int</span> <span style="color:#50fa7b">max_arr</span>(<span style="color:#8be9fd">int</span><span style="color:#ff79c6">*</span> arr, <span style="color:#8be9fd">int</span> n) {
    <span style="color:#8be9fd">int</span> max <span style="color:#ff79c6">=</span> arr[<span style="color:#bd93f9">0</span>];
    <span style="color:#ff79c6">while</span>(i <span style="color:#ff79c6">!=</span> n) {
        <span style="color:#ff79c6">if</span> (arr[i] <span style="color:#ff79c6">&gt;</span> max)
            max <span style="color:#ff79c6">=</span> arr[i];
        i <span style="color:#ff79c6">+=</span> <span style="color:#bd93f9">1</span>;
    }
    <span style="color:#ff79c6">return</span> max;
}</code></pre></div>
</div>
<p>
If I were to ask you to write this program you would likely come up with the
same result as mine — maybe using a different loop or conditional.</p>
</div>
</div>
<div id="outline-container-headline-9" class="outline-3">
<h3 id="headline-9">
Functional
</h3>
<div id="outline-text-headline-9" class="outline-text-3">
<p>In functional programming, we view a program as a composition of functions.
Instead of modifying internal state, we map values in the mathematical sense. To
solve the maximum array problem, we define a recursive solution.</p>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">let</span> <span style="color:#ff79c6">rec</span> max_list l <span style="color:#ff79c6">=</span>
  <span style="color:#ff79c6">match</span> l <span style="color:#ff79c6">with</span>
  <span style="color:#ff79c6">|</span> <span style="color:#ff79c6">[</span>x<span style="color:#ff79c6">]</span> <span style="color:#ff79c6">-&gt;</span> x
  <span style="color:#ff79c6">|</span> h<span style="color:#ff79c6">::</span>tl <span style="color:#ff79c6">-&gt;</span> max h <span style="color:#ff79c6">(</span>max_list tl<span style="color:#ff79c6">);;</span></code></pre></div>
</div>
<p>
We use the built in <code>max</code> function which takes two parameters and returns the
larger of the two, applying it to the list recursively.</p>
<p>
But let&#39;s inspect what OCaml tells us about our new function.</p>
<pre class="example">
 Lines 2-4, characters 2-32:
 2 | ..match l with
 3 |   | [x] -&gt; x
 4 |   | h::tl -&gt; max h (max_list tl)....
 Warning 8: this pattern-matching is not exhaustive.
 Here is an example of a case that is not matched:
 []
 val max_list : &#39;a list -&gt; &#39;a = &lt;fun&gt;
</pre>
<p>
A fact that we overlooked in our imperative version is immediately evident in
our functional version.</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-10" class="outline-2">
<h2 id="headline-10">
Reasoning Correctness &amp; Edge Cases
</h2>
<div id="outline-text-headline-10" class="outline-text-2">
<p>Suppose this function <code>max</code> is more complex. Your team lead notices that this
function&#39;s correctness is vital to your customers so they want to ensure it is
correct. It&#39;s so vital, there should some sort of formal proof.</p>
<div id="outline-container-headline-11" class="outline-3">
<h3 id="headline-11">
Imperative
</h3>
<div id="outline-text-headline-11" class="outline-text-3">
<p>We may prove this through a loop invariant. I see a loop invariant as a slight
variation of induction. If this works for the base case (an array of a single
element) and we prove that it works for any arbitrary \(k\) to \(k+1\), then we
have proven it works for all cases.</p>
<div class="src src-c">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8be9fd">int</span> <span style="color:#50fa7b">max_arr</span>(<span style="color:#8be9fd">int</span><span style="color:#ff79c6">*</span> arr, <span style="color:#8be9fd">int</span> n) {
    <span style="color:#8be9fd">int</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>;
    <span style="color:#8be9fd">int</span> max <span style="color:#ff79c6">=</span> arr[<span style="color:#bd93f9">0</span>];
    <span style="color:#6272a4">// max is the maximum of subarray arr[0..0]
</span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">while</span>(i <span style="color:#ff79c6">!=</span> n) {
        <span style="color:#6272a4">// max is the maximum of subarray arr[0..i-1]
</span><span style="color:#6272a4"></span>        <span style="color:#ff79c6">if</span> (arr[i] <span style="color:#ff79c6">&gt;</span> max)
            max <span style="color:#ff79c6">=</span> arr[i];
        <span style="color:#6272a4">// max is the maximum of subarray arr[0..i]
</span><span style="color:#6272a4"></span>        i <span style="color:#ff79c6">+=</span> <span style="color:#bd93f9">1</span>;
        <span style="color:#6272a4">// max is the maximum of subarray arr[0..i-1]
</span><span style="color:#6272a4"></span>    }
    <span style="color:#6272a4">// max is the maximum value of subarray arr[0..i-1]
</span><span style="color:#6272a4"></span>    <span style="color:#6272a4">// i = n (from while loop condition)
</span><span style="color:#6272a4"></span>    <span style="color:#6272a4">// therefore, max is the maximum value of arr[0..n-1]
</span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">return</span> max;
}</code></pre></div>
</div>
<p>
This process is cumbersome and unwieldy for most industries and applications. Instead,
something like a series of unit tests better fits this function. Yet, then we
get into another conversation about which inputs to use for testing and
something like the array of length 0 case could remain overlooked.</p>
<p>
Let&#39;s say the empty array case is caught – it likely would be given <code>max</code> is not
very complex. How do we address it? Well, there are a couple of possibilities.
Given we are working in C, a fairly common solution is to return <code>null</code> or a value
outside of the expected range.</p>
<div class="src src-c">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#8be9fd">int</span> <span style="color:#50fa7b">max_arr</span>(<span style="color:#8be9fd">int</span><span style="color:#ff79c6">*</span> arr, <span style="color:#8be9fd">int</span> n) {
    <span style="color:#ff79c6">if</span> (n <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">0</span>)
        <span style="color:#ff79c6">return</span> <span style="color:#8be9fd;font-style:italic">NULL</span>;
    <span style="color:#8be9fd">int</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>;
    <span style="color:#8be9fd">int</span> max <span style="color:#ff79c6">=</span> arr[<span style="color:#bd93f9">0</span>];
    <span style="color:#6272a4">// max is the maximum of subarray arr[0..0]
</span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">while</span>(i <span style="color:#ff79c6">!=</span> n) {
        <span style="color:#6272a4">// max is the maximum of subarray arr[0..i-1]
</span><span style="color:#6272a4"></span>        <span style="color:#ff79c6">if</span> (arr[i] <span style="color:#ff79c6">&gt;</span> max)
            max <span style="color:#ff79c6">=</span> arr[i];
        <span style="color:#6272a4">// max is the maximum of subarray arr[0..i]
</span><span style="color:#6272a4"></span>        i <span style="color:#ff79c6">+=</span> <span style="color:#bd93f9">1</span>;
        <span style="color:#6272a4">// max is the maximum of subarray arr[0..i-1]
</span><span style="color:#6272a4"></span>    }
    <span style="color:#6272a4">// max is the maximum value of subarray arr[0..i-1]
</span><span style="color:#6272a4"></span>    <span style="color:#6272a4">// i = n (from while loop condition)
</span><span style="color:#6272a4"></span>    <span style="color:#6272a4">// therefore, max is the maximum value of arr[0..n-1]
</span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">return</span> max;
}</code></pre></div>
</div>
<p>
But when functions call this, how do they know it may return <code>NULL</code>? There may be
a comment before saying, &#34;returns <code>NULL</code> in the case that the array is length 0,&#34;
but this isn&#39;t immediately evident to another programmer using the function. At
worst, it may go unnoticed until a runtime error occurs in production.</p>
<p>
Imperative languages that could raise an exception can also hide the possibility
in some languages. Java&#39;s <code>throws IllegalArgumentException</code> is an example of an
ideal implementation. It forces callers to account for the possible failure.</p>
</div>
</div>
<div id="outline-container-headline-12" class="outline-3">
<h3 id="headline-12">
Functional
</h3>
<div id="outline-text-headline-12" class="outline-text-3">
<p>We can trivially apply a formal proof in the same inductive form. Our function
has the base case: a singular element list, and the recursive case: the maximum
of a list is the maximum of the first element and the maximum of the remainder
of the list. That is, if we didn&#39;t have this empty case.</p>
<p>
OCaml address this by adding in an <code>option</code> type. This allows a function to
conditionally returning a value. <code>Some</code> represents an actual value, whereas <code>None</code>
represents failure to produce a value.</p>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">let</span> <span style="color:#ff79c6">rec</span> option_max_list l <span style="color:#ff79c6">=</span>
  <span style="color:#ff79c6">match</span> l <span style="color:#ff79c6">with</span>
    [] <span style="color:#ff79c6">-&gt;</span> <span style="color:#50fa7b">None</span>
  <span style="color:#ff79c6">|</span> <span style="color:#ff79c6">[</span>x<span style="color:#ff79c6">]</span> <span style="color:#ff79c6">-&gt;</span> <span style="color:#50fa7b">Some</span> x
  <span style="color:#ff79c6">|</span> h<span style="color:#ff79c6">::</span>tl <span style="color:#ff79c6">-&gt;</span> <span style="color:#50fa7b">Some</span> <span style="color:#ff79c6">(</span>max h <span style="color:#ff79c6">(</span>Option.get <span style="color:#ff79c6">(</span>option_max_list tl<span style="color:#ff79c6">)));;</span></code></pre></div>
</div>
<pre class="example">
val option_max_list : &#39;a list -&gt; &#39;a option = &lt;fun&gt;
</pre>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">let</span> empty_max <span style="color:#ff79c6">=</span> option_max_list []<span style="color:#ff79c6">;;</span></code></pre></div>
</div>
<pre class="example">
None
</pre>
<div class="src src-ocaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ocaml" data-lang="ocaml"><span style="color:#ff79c6">let</span> some_max <span style="color:#ff79c6">=</span> option_max_list <span style="color:#ff79c6">[</span>1<span style="color:#ff79c6">;</span>2<span style="color:#ff79c6">;</span>3<span style="color:#ff79c6">;</span>4<span style="color:#ff79c6">];;</span></code></pre></div>
</div>
<pre class="example">
Some 4
</pre>
<p>
Moreover, this returning an optional type <em>forces</em> functions that call it to
account for its possible failure. A programmer using the function is immediately
aware of the functions inabilities. From our recursive calls to <code>option_max_list</code>,
we have to use <code>Option.get</code> which requires <code>Some</code> or else an exception will be
raised. We can prove that we will always get <code>Some</code> from recursive calls quite
easily, so this will not arise.</p>
<p>
You may already be familiar with the <code>Option</code> notion from some imperative
languages. These could be <code>Nullable</code> from C#, <code>Option</code> from Rust, or <code>Optional</code> from
Java. These were gathered from functional language&#39;s implementations.</p>
</div>
</div>
</div>
</div>

    </div>
  </article>

  
  




  <div class="blog-post-comments">
    
      <div id="disqus_thread">
  <script type="text/javascript">
    (function() {
      
      
      
      
    
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'cjohnson19';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

    
  </div>



  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">All Posts</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&text=Functional%20Language%20Correctness" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&title=Functional%20Language%20Correctness" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&is_video=false&description=Functional%20Language%20Correctness" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Functional%20Language%20Correctness&body=Check out this article: https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&title=Functional%20Language%20Correctness" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&title=Functional%20Language%20Correctness" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&name=Functional%20Language%20Correctness&description=Introduction%20%20What%20is%20Functional%20Programming%3f%20%20If%20you%20already%20have%20experienced%20functional%20programming%2c%20or%20feel%20like%20you%20have%20a%20good%20grasp%20on%20its%20concepts%2c%20feel%20free%20to%20jump%20ahead%20to%20the%20next%20sub%20section%20on%20OCaml.%20This%20will%20only%20be%20review%20for%20you.%0a%20If%20you%20have%20never%20heard%20of%20functional%20programming%2c%20take%20some%20time%20to%20ponder%20on%20the%20design%20and%20don%26%2339%3bt%20jump%20to%20conclusions.%0a%20My%20first%20time%20using%20a%20functional%20language%20was%20much%20like%20my%20first%20time%20programming%20recursively." aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fcjohnson19.github.io%2fposts%2ffunctional-language-correctness%2f&t=Functional%20Language%20Correctness" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2021  Chase Johnson 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">All Posts</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>



  


<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>

</html>
